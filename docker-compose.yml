version: "3.8"

services:
  codesage:
    image: thehapyone/codesage:0.0.1-rc1
    container_name: codesage
    ports:
      - "8080:8000"
    environment:
      SAGE_CONFIG_PATH: "/app/sage/config.toml"
      REQUESTS_CA_BUNDLE: "/etc/ssl/certs/ca-certificates.crt"
      JIRA_PASSWORD: ${JIRA_PASSWORD}
      OPENAI_API_KEY: ${OPENAI_API_KEY}
      OPENAI_API_BASE: ${OPENAI_API_BASE}
      OPENAI_API_VERSION: ${OPENAI_API_VERSION}
      OPENAI_API_TYPE: ${OPENAI_API_TYPE}
      GITLAB_PASSWORD: ${GITLAB_PASSWORD}
      CHAINLIT_AUTH_SECRET: ${CHAINLIT_AUTH_SECRET}
      COHERE_API_KEY: ${COHERE_API_KEY}
    volumes:
      - ${SAGE_HOME}/config.toml:/app/sage/config.toml
      - ${SAGE_HOME}/data:/app/data
    restart: always

